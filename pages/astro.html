<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="author" content="Ankur Tyagi (@7h3rAm)"/>
    <meta name="description" content="Personal Weblog"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>मंथन | Manthan</title>
    <link rel="icon" type="image/webp" sizes="32x32" href="/static/images/manthan-32x32.png.webp"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/static/css/style.css"/>
    <link id="codestylesheet" rel="stylesheet" type="text/css" media="screen" href="/static/css/atelier-forest-light.css">
    <link rel="stylesheet" href="/static/css/tablesort.css"/>
    <link rel="stylesheet" href="/static/css/leaflet.css"/>
   </head>
  <body>
    <div class="body">
      <div class="menu">
        <table>
          <tr>
            <td colspan="3"><a class="menu_home" href="/index.html">मंथन</a></td>
          </tr>
          <tr>
            <td><a class="menu_archive" href="/archive.html">💾 Archive</a></td>
            <td><a class="menu_tags" href="/tags.html">🔖 Tags</a></td>
            <td><a class="menu_stats" href="/stats.html">📊 Stats</a></td>
            <!--<td>-->
            <!--  <label class="theme-switch" for="checkbox">-->
            <!--    <input type="checkbox" id="checkbox" />-->
            <!--    <div class="slider round"></div>-->
            <!--  </label>-->
            <!--</td>-->
          </tr>
        </table>
      </div>
      <div class="content">
        <h1 class="h1">🌌 Astro</h1>
          <ul class="active">

            <li><h2 class="h2 collapsible expanded" onclick=toggle(this);>🪐 Astronomy Picture of the Day (APOD)</h2><ul class="active nested">
              <li>
                <h3 class="h3 collapsible expanded" onclick=toggle(this); id="apodtitle"></h3>
                <p class="active nested"><small>Images provided courtesy of <a href="https://astrophysics.gsfc.nasa.gov/">ASD</a> at <a href="https://www.nasa.gov/">NASA</a>/<a href="https://www.nasa.gov/centers/goddard/">GSFC</a> and <a href="https://www.mtu.edu/">Michigan Tech. U</a>. Visit <a href="https://apod.nasa.gov/apod/astropix.html">[🔗]</a> for more details or <a href="https://apod.nasa.gov/apod/archivepix.html">[🔗]</a> for archived images.</small></p>
                <p class="active nested"><a id="apodurl"><img class="sqimages" id="apodimage"></a></p>
              </li>
            </ul></li>

            <li><h2 class="h2 collapsible expanded" onclick=toggle(this);>🔔 Earth Events</h2><ul class="active nested">
              <li>
                <h3 class="h3 collapsible expanded" onclick=toggle(this); id="eartheventstitle"></h3><ul class="active nested">
                  <li><p class="active nested"><small>Data provided courtesy of <a href="https://eonet.sci.gsfc.nasa.gov/">EONET</a> <a href="https://eonet.sci.gsfc.nasa.gov/what-is-eonet">[🔗]</a> and <a href="https://www.usgs.gov/natural-hazards/earthquake-hazards/earthquakes">USGS Earthquake Hazards Program</a> <a href="https://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson.php">[🔗]</a> teams.</small></p></li>
                  <li><div id="eartheventsmap" style="width:100%; height:450px; border:1px solid #766e6b;" class="mapclass"></div></li>
                </ul>
              </li>
            </ul></li>

            <li><h2 class="h2 collapsible expanded" onclick=toggle(this);>🛰️ International Space Station (ISS)</h2><ul class="active nested">
              <li>
                <h3 class="h3 collapsible expanded" onclick=toggle(this); id="isstitle"></h3><ul class="active nested">
                  <li><p class="active nested"><small>Data provided courtesy of <a href="https://wheretheiss.at/w/about">Where The ISS At?</a> API by <a href="https://twitter.com/shupp">Bill Shupp</a> and <a href="http://open-notify.org/">Open Notify</a> API by <a href="https://twitter.com/natronics">Nathan Bergey</a>.</small></p></li>
                  <li>For more details, visit <a href="https://www.n2yo.com/?s=25544&df=1">N2YO.com</a>.</li>
                  <li>
                    <table class="active nested astrotabclass">
                      <tr>
                        <th>Latitude</th>
                        <th>Longitude</th>
                        <th>Altitude</th>
                        <th>Velocity</th>
                        <th>Visibility</th>
                      </tr>
                      <tr>
                        <td id="isslatcell"></td>
                        <td id="issloncell"></td>
                        <td id="issaltcell"></td>
                        <td id="issvelcell"></td>
                        <td id="issviscell" style="text-transform:capitalize;"></td>
                      </tr>
                    </table>
                  </li>
                  <li><div id="issmap" style="width:100%; height:450px; border:1px solid #766e6b;" class="mapclass"></div></li>
                </ul>
              </li>
            </ul></li>

            <li><h2 class="h2 collapsible expanded" onclick=toggle(this);>🌠 Near-Earth Objects (NEOs)</h2><ul class="active nested">
              <li>
                <h3 class="h3 collapsible expanded" onclick=toggle(this); id="neotitle"></h3><ul class="active nested">
                  <li><p class="active nested"><small>Data provided courtesy of <a href="http://neo.jpl.nasa.gov/">NASA JPL NEO</a> team.</small></p></li>
                  <li><table id="neotable" class="active nested astrotabclass"></table></li>
                </ul>
              </li>
            </ul></li>

            <li><h2 class="h2 collapsible expanded" onclick=toggle(this);>🧑‍🚀 People in Space</h2><ul class="active nested">
              <li>
                <h3 class="h3 collapsible expanded" onclick=toggle(this); id="spaceppltitle"></h3><ul class="active nested">
                  <li><p class="active nested"><small>Data provided courtesy of <a href="http://open-notify.org/">Open Notify</a> API by <a href="https://twitter.com/natronics">Nathan Bergey</a>.</small></p></li>
                  <li><table id="spaceppltable" class="active nested astrotabclass"></table></li>
                </ul>
              </li>
            </ul></li>

            <li><h2 class="h2 collapsible expanded" onclick=toggle(this);>🛰️ Satellite Images</h2><ul class="active nested">
              <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>⌛ Timelapse</h3><ul class="active nested">
                <!--<li><p class="active nested"><small>Sun AIA/EVE/HMI Collage</small></p></p><table><tr><td><img src="https://raw.githubusercontent.com/7h3rAm/datastore/master/latestsdo.gif"></td></tr></table></li>-->
                <li><p class="active nested"><small>Whole Earth Side-by-Side Collage</small></p></p><table><tr><td><img src="https://raw.githubusercontent.com/7h3rAm/datastore/master/latestsbs.gif"></td></tr></table></li>
                <!--<li><p class="active nested"><small>Himawari (Natural Color)</small></p></p><tr><td><img class="sqimages" src="https://raw.githubusercontent.com/7h3rAm/datastore/master/latesthimawari8nc.gif"></td></tr></table></li>-->
                <!--<li><p class="active nested"><small>GOES17</small></p></p><tr><td><img class="sqimages" src="https://raw.githubusercontent.com/7h3rAm/datastore/master/latestgoes17west.gif"></td></tr></table></li>-->
                <!--<li><p class="active nested"><small>GOES16</small></p></p><tr><td><img class="sqimages" src="https://raw.githubusercontent.com/7h3rAm/datastore/master/latestgoes16east.gif"></td></tr></table></li>-->
                <!--<li><p class="active nested"><small>Elektro-L</small></p></p><tr><td><img class="sqimages" src="https://raw.githubusercontent.com/7h3rAm/datastore/master/latestelektrol2.gif"></td></tr></table></li>-->
                <!--<li><p class="active nested"><small>METEOSAT 0</small></p></p><tr><td><img class="sqimages" src="https://raw.githubusercontent.com/7h3rAm/datastore/master/latestmeteosat0.gif"></td></tr></table></li>-->
                <!--<li><p class="active nested"><small>METEOSAT 41.5</small></p></p><tr><td><img class="sqimages" src="https://raw.githubusercontent.com/7h3rAm/datastore/master/latestmeteosat415.gif"></td></tr></table></li>-->
              </ul></li>
              <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>🛎️ Latest</h3><ul class="active nested">
                <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>🔆 Sun</h3><ul class="active nested">
                  <li><p class="active nested"><small>Images provided courtesy of <a href="https://sdo.gsfc.nasa.gov/">NASA Solar Dynamics Observatory (SDO) and the Atmospheric Imaging Assembly (AIA), Extreme Ultraviolet Variability Experiment (EVE), and Helioseismic Magnetic Imager (HMI) science</a> teams.</small> <a href="https://svs.gsfc.nasa.gov/3988">[🔗]</a></p>
                    <table>
                      <tr>
                        <td><a id="sdohmidhref"><img class="sqimages" id=sdohmid></a></td>
                        <td><a id="sdohmiichref"><img class="sqimages" id=sdohmiic></a></td>
                        <td><a id="sdo0171href"><img class="sqimages" id=sdo0171></a></td>
                        <td><a id="sdo0304href"><img class="sqimages" id=sdo0304></a></td>
                      </tr>
                      <tr>
                        <td class="tdtitle">SDO HMI Dopplergram</td>
                        <td class="tdtitle">SDO HMI Intensitygram</td>
                        <td class="tdtitle">SDO AIA 171 A</td>
                        <td class="tdtitle">SDO AIA 304 A</td>
                      </tr>
                    </table>
                  </li>
                </ul></li>
                <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>🌎 Earth</h3><ul class="active nested">
                  <li>
                    <p class="active nested"><small>Images provided courtesy of <a href="https://en.wikipedia.org/wiki/Deep_Space_Climate_Observatory">Deep Space Climate Observatory (DSCOVR)</a>, <a href="https://epic.gsfc.nasa.gov/">Earth Polychromatic Imaging Camera (EPIC)</a>, <a href="https://www.noaa.gov/">National Oceanic and Atmospheric Administration (NOAA)</a>. <a href="https://epic.gsfc.nasa.gov/api/natural">[📄]</a></small></p>
                    <p class="active nested"><small id="dscovrepicnatinfo"></small></p></p>
                    <table>
                      <tr>
                        <td><a id="dscovrepicnathref"><img class="sqimages" id="dscovrepicnat"></a></td>
                      </tr>
                      <tr>
                        <td class="tdtitle">DSCOVR EPIC (Natural)</td>
                      </tr>
                    </table>
                  </li>
                </ul></li>
                <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>🌏 India/Asia</h3><ul class="active nested">
                  <li><p class="active nested"><small>Images provided courtesy of <a href="https://mausam.imd.gov.in/">India Meteorological Department, Ministry of Earth Sciences, Government of India</a>.</small></p>
                    <table>
                      <tr>
                        <td><a id="insat3dglobalvishref"><img class="sqimages" id="insat3dglobalvis"></a></td>
                        <td><a id="insat3dglobalir1href"><img class="sqimages" id="insat3dglobalir1"></a></td>
                      </tr>
                      <tr>
                        <td class="tdtitle">INSAT3D Global (VIS)</td>
                        <td class="tdtitle">INSAT3D Global (IR)</td>
                      </tr>
                    </table>
                  </li>
                </ul></li>
                <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>🌏 Asia-Pacific</h3><ul class="active nested">
                  <li><p class="active nested"><small>Images provided courtesy of <a href="https://rammb2.cira.colostate.edu/">Regional and Mesoscale Meteorology Branch (RAMMB), Cooperative Institute for Research in the Atmosphere (CIRA)</a>.</small></p>
                    <table>
                      <tr>
                        <td><a id="himawari_naturalcolorhref"><img class="sqimages" id="himawari_naturalcolor"></a></td>
                        <td><a id="himawari_truecolorhref"><img class="sqimages" id="himawari_truecolor"></a></td>
                      </tr>
                      <tr>
                        <td class="tdtitle">Himawari (Natural Color)</td>
                        <td class="tdtitle">Himawari (True Color)</td>
                      </tr>
                    </table>
                  </li>
                </ul></li>
                <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>🌎 America-Pacific</h3><ul class="active nested">
                  <li><p class="active nested"><small>Images provided courtesy of <a href="https://www.star.nesdis.noaa.gov/star/index.php">Center for Satellite Applications and Research (STAR), National Environmental Satellite, Data, and Information Service (NESDIS), National Oceanic and Atmospheric Administration (NOAA)</a>.</small></p>
                    <table>
                      <tr>
                        <td><a id="goes17westfdhref"><img class="sqimages" id="goes17westfd"></a></td>
                        <td><a id="goes16eastfdhref"><img class="sqimages" id="goes16eastfd"></a></td>
                      </tr>
                      <tr>
                        <td class="tdtitle">GOES17</td>
                        <td class="tdtitle">GOES16</td>
                      </tr>
                    </table>
                  </li>
                </ul></li>
                <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>🌍 Africa/Europe/Asia</h3><ul class="active nested">
                  <li><p class="active nested"><small>Images provided courtesy of <a href="https://www.eumetsat.int/">European Organisation for the Exploitation of Meteorological Satellites (EUMETSAT)</a>.</small></p>
                    <table>
                      <tr>
                        <td><a id="elektrolhref"><img class="sqimages" id="elektrol"></a></td>
                        <td><a id="meteosat0href"><img class="sqimages" id="meteosat0"></a></td>
                        <td><a id="meteosat415href"><img class="sqimages" id="meteosat415"></a></td>
                      </tr>
                      <tr>
                        <td class="tdtitle">Elektro-L</td>
                        <td class="tdtitle">METEOSAT 0</td>
                        <td class="tdtitle">METEOSAT 41.5</td>
                      </tr>
                    </table>
                  </li>
                </ul></li>
              </ul></li>
            </ul></li>

            <li><h2 class="h2 collapsible expanded" onclick=toggle(this);>🚀 SpaceX Stats</h2><ul class="active nested">
              <li>
                <p class="active nested"><small>Data provided courtesy of <a href="https://github.com/r-spacex/SpaceX-API">r/SpaceX API</a> team.</small></p>
                <ul class="active nested">
                  <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>Launches</h3><ul class="active nested">
                    <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>Past</h3><ul class="active nested"><li><table id="spacexpastlaunchestable" class="active nested astrotabclass"></table></li></ul></li>
                    <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>Future</h3><ul class="active nested"><li><table id="spacexfuturelaunchestable" class="active nested astrotabclass"></table></li></ul></li>
                  </ul></li>
                  <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>Roadster</h3><ul class="active nested"><li><table id="spacexroadstertable" class="active nested astrotabclass"></table></li></ul></li>
                  <li><h3 class="h3 collapsible expanded" onclick=toggle(this);>Starlink</h3><ul class="active nested">
                    <li>
                      <table class="active nested astrotabclass">
                        <tr>
                          <td><b>First Launch</b></td>
                          <td><b>Latest Launch</b></td>
                          <td><b>In Orbit</b></td>
                          <td><b>Decayed</b></td>
                          <td><b>Total</b></td>
                        </tr>
                          <td id="starlinkfirstlaunchcell"></td>
                          <td id="starlinklatestlaunchcell"></td>
                          <td id="starlinkinorbitcell"></td>
                          <td id="starlinkdecayedcell"></td>
                          <td id="starlinktotalcell"></td>
                      </table>
                    </li>
                    <li>
                      <div id="starlinkmap" style="width:100%; height:450px; border:1px solid #766e6b;" class="mapclass"></div>
                    </li>
                  </ul></li>
                </ul>
              </li>
            </ul></li>

          </ul>

      <p style="float:right;"><code id="lastupdate"></code></p>
      <!--<script type="text/javascript" src="/static/js/three.js"></script>-->
      <script type="text/javascript" src="/static/js/timeago.min.js"></script>
      <script type="text/javascript" src="/static/js/tablesort.min.js"></script>
      <script type="text/javascript" src="/static/js/tablesort.monthname.js"></script>
      <script type="text/javascript" src="/static/js/tablesort.number.js"></script>
      <script type="text/javascript" src="/static/js/leaflet.js"></script>
      <script type="text/javascript" src="/static/js/leaflet.terminator.js"></script>
      <script>
        function loadJson(url, callback) {
          var XmlHttpRequest = new XMLHttpRequest();
          XmlHttpRequest.overrideMimeType("application/json");
          XmlHttpRequest.open('GET', url, true);
          XmlHttpRequest.onreadystatechange = function () {
            if (XmlHttpRequest.readyState == 4 && XmlHttpRequest.status == "200") {
              callback(XmlHttpRequest.responseText);
            }
          }
          XmlHttpRequest.send(null);
        }
        function doISS() {
          function updateISS () {
            loadJson("https://api.wheretheiss.at/v1/satellites/25544?units=miles", function(response) {
              issapi = JSON.parse(response);
              console.log(issapi);
              var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
              var now = new Date();
              var yyy = now.getFullYear();
              var mon = months[now.getMonth()];
              var day = now.getDate();
              var hrs = now.getHours();
              var min = now.getMinutes();
              var sec = now.getSeconds();
              var tzn = new Intl.DateTimeFormat('en-US', { dateStyle: 'full', timeStyle: 'long' }).format(now).split(/[\s,]+/).pop();
              if (mon < 10) { mon = '0' + mon; }
              if (day < 10) { day = '0' + day; }
              if (hrs < 10) { hrs = '0' + hrs; }
              if (min < 10) { min = '0' + min; }
              if (sec < 10) { sec = '0' + sec; }
              document.getElementById("isstitle").innerText = "ISS Stats (" + day + "/" + mon + "/" + yyy + " " + hrs + ":" + min + ":" + sec + " " + tzn + ")";
              document.getElementById("isslatcell").innerText = issapi['latitude'].toFixed(2);
              document.getElementById("issloncell").innerText = issapi['longitude'].toFixed(2);
              document.getElementById("issaltcell").innerText = issapi['altitude'].toFixed(2) + " miles";
              document.getElementById("issvelcell").innerText = issapi['velocity'].toFixed(2) + " mph";
              document.getElementById("issviscell").innerText = issapi['visibility'].toLowerCase();
              iss.setLatLng([issapi['latitude'], issapi['longitude']]);
              issarea.setLatLng([issapi['latitude'], issapi['longitude']]);
              issmap.panTo([issapi['latitude'], issapi['longitude']], animate=true);
              var text = '<a href="https://www.nasa.gov/mission_pages/station/main/index.html"><b>International Space Station</b></a><br/><b>Location</b>: ' + issapi['latitude'].toFixed(2) + "," + issapi['longitude'].toFixed(2) + "<br/><b>Altitude</b>: " + issapi["altitude"].toFixed(2) + " miles<br/><b>Velocity</b>: " + issapi["velocity"].toFixed(2) + " mph<br/><b>Visibility</b>: " + issapi["visibility"];
              iss._popup.setContent(text);
            });
            setTimeout(updateISS, 5000);
          }
          var issmap = L.map('issmap').setView([0,0], 2);
          var osmlayer = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
          L.tileLayer(osmlayer, {
            attribution: '<a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
          }).addTo(issmap);
          var ISSIcon = L.icon({
            iconUrl: "https://raw.githubusercontent.com/7h3rAm/datastore/master/iss_light.png",
            iconSize: [50, 30],
            iconAnchor: [25, 15],
            popupAnchor: [50, 25],
          });
          var iss = L.marker([0, 0], {icon: ISSIcon}).bindPopup("").addTo(issmap);
          var issarea = L.circle([0,0], 2200e3, {color:"#766e6b", opacity:0.9, weight:0.6, fillColor:"#dedede", fillOpacity:0.3}).addTo(issmap);
          const opt = {
            color: '#000',
            opacity: 0.1,
            fillColor: '#000',
            fillOpacity: 0.3,
            resolution: 2
          };
          const t = L.terminator(opt);
          t.addTo(issmap);
          const updateTerminator = function(t) {
            let t2 = L.terminator(opt);
            t.setLatLngs(t2.getLatLngs());
            t.redraw();
          };
          updateISS();
        }
        function doAstro() {
          loadJson("https://raw.githubusercontent.com/7h3rAm/datastore/master/astro.json", function(response) {
            astro = JSON.parse(response);
            console.log(astro);

            // astronomy picture of the day stats
            document.getElementById("apodtitle").innerText = astro["apod"]["title"];
            document.getElementById("apodimage").src = astro["apod"]["datastore"];
            document.getElementById("apodurl").href = astro["apod"]["datastore"];

            // earth observatory natural event tracker stats
            console.log(astro["earthevents"]["title"]);
            document.getElementById("eartheventstitle").innerText = astro["earthevents"]["title"];
            if (astro["earthevents"]["events"].length) {
              var eartheventsmap = L.map('eartheventsmap').setView([0, 0], 2);
              var osmlayer = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
              L.tileLayer(osmlayer, {
                attribution: '<a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
              }).addTo(eartheventsmap);
              const size = 5;

              if (astro["earthevents"]["mapdata"]["Drought"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "💧"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Drought"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Drought"][i][1], astro["earthevents"]["mapdata"]["Drought"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Drought"][i][0]).addTo(eartheventsmap);
                 }
              }
              if (astro["earthevents"]["mapdata"]["Dust and Haze"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "🌫️"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Dust and Haze"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Dust and Haze"][i][1], astro["earthevents"]["mapdata"]["Dust and Haze"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Dust and Haze"][i][0]).addTo(eartheventsmap);
                }
              }
              if (astro["earthevents"]["mapdata"]["Earthquakes"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "⚠️"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Earthquakes"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Earthquakes"][i][1], astro["earthevents"]["mapdata"]["Earthquakes"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Earthquakes"][i][0]).addTo(eartheventsmap);
                }
              }
              if (astro["earthevents"]["mapdata"]["Floods"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "🌊"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Floods"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Floods"][i][1], astro["earthevents"]["mapdata"]["Floods"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Floods"][i][0]).addTo(eartheventsmap);
                }
              }
              if (astro["earthevents"]["mapdata"]["Landslides"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "⛰️"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Landslides"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Landslides"][i][1], astro["earthevents"]["mapdata"]["Landslides"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Landslides"][i][0]).addTo(eartheventsmap);
                }
              }
              if (astro["earthevents"]["mapdata"]["Manmade"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "🧍"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Manmade"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Manmade"][i][1], astro["earthevents"]["mapdata"]["Manmade"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Manmade"][i][0]).addTo(eartheventsmap);
                }
              }
              if (astro["earthevents"]["mapdata"]["Sea and Lake Ice"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "🧊"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Sea and Lake Ice"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Sea and Lake Ice"][i][1], astro["earthevents"]["mapdata"]["Sea and Lake Ice"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Sea and Lake Ice"][i][0]).addTo(eartheventsmap);
                }
              }
              if (astro["earthevents"]["mapdata"]["Severe Storms"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "🌀"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Severe Storms"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Severe Storms"][i][1], astro["earthevents"]["mapdata"]["Severe Storms"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Severe Storms"][i][0]).addTo(eartheventsmap);
                }
              }
              if (astro["earthevents"]["mapdata"]["Snow"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "🌨️"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Snow"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Snow"][i][1], astro["earthevents"]["mapdata"]["Snow"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Snow"][i][0]).addTo(eartheventsmap);
                }
              }
              if (astro["earthevents"]["mapdata"]["Temperature Extremes"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "🌡️"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Temperature Extremes"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Temperature Extremes"][i][1], astro["earthevents"]["mapdata"]["Temperature Extremes"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Temperature Extremes"][i][0]).addTo(eartheventsmap);
                }
              }
              if (astro["earthevents"]["mapdata"]["Volcanoes"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "🌋"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Volcanoes"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Volcanoes"][i][1], astro["earthevents"]["mapdata"]["Volcanoes"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Volcanoes"][i][0]).addTo(eartheventsmap);
                }
              }
              if (astro["earthevents"]["mapdata"]["Water Color"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "⛲"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Water Color"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Water Color"][i][1], astro["earthevents"]["mapdata"]["Water Color"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Water Color"][i][0]).addTo(eartheventsmap);
                }
              }
              if (astro["earthevents"]["mapdata"]["Wildfires"].length) {
                const iconOptions = {
                  iconSize  : [size, size],
                  iconAnchor: [size/2, size + 9], 
                  className : "mymarker",
                  html: "🔥"
                }
                const markerOptions = {
                  draggable: false,
                  icon: L.divIcon(iconOptions)
                }
                for (var i = 0; i < astro["earthevents"]["mapdata"]["Wildfires"].length; i++) {
                  marker = new L.marker([astro["earthevents"]["mapdata"]["Wildfires"][i][1], astro["earthevents"]["mapdata"]["Wildfires"][i][2]], markerOptions).bindPopup(astro["earthevents"]["mapdata"]["Wildfires"][i][0]).addTo(eartheventsmap);
                }
              }
              const opt = {
                color: '#000',
                opacity: 0.1,
                fillColor: '#000',
                fillOpacity: 0.3,
                resolution: 2
              };
              const t = L.terminator(opt);
              t.addTo(eartheventsmap);
              const updateTerminator = function(t) {
                let t2 = L.terminator(opt);
                t.setLatLngs(t2.getLatLngs());
                t.redraw();
              };
            }

            // near-earth objects stats
            document.getElementById("neotitle").innerText = astro["neo"]["title"];
            var neotable = document.getElementById("neotable");
            if (astro["neo"]["objects"].length) {
              var thead = document.createElement("thead");
              var tr = document.createElement("tr");
              var th = document.createElement("th"); var text1 = document.createTextNode("#"); th.appendChild(text1); th.style.fontWeight = "bold"; tr.appendChild(th);
              //var th = document.createElement("th"); var text2 = document.createTextNode("Date"); th.appendChild(text2); th.style.fontWeight = "bold"; tr.appendChild(th);
              var th = document.createElement("th"); var text3 = document.createTextNode("Name"); th.appendChild(text3); th.style.fontWeight = "bold"; tr.appendChild(th);
              var th = document.createElement("th"); var text7 = document.createTextNode("Hazardous?"); th.appendChild(text7); th.style.fontWeight = "bold"; tr.appendChild(th);
              var th = document.createElement("th"); var text4 = document.createTextNode("Velocity"); th.appendChild(text4); th.style.fontWeight = "bold"; tr.appendChild(th);
              var th = document.createElement("th"); var text5 = document.createTextNode("Diameter"); th.appendChild(text5); th.style.fontWeight = "bold"; tr.appendChild(th);
              var th = document.createElement("th"); var text6 = document.createTextNode("Miss Distance"); th.appendChild(text6); th.style.fontWeight = "bold"; tr.appendChild(th);
              thead.appendChild(tr);
              neotable.appendChild(thead);
              var tbody = document.createElement("tbody");
              for (var i = 0; i < astro["neo"]["objects"].length; i++){
                var tr = document.createElement("tr");
                var idtd = document.createElement("td");
                var idtext = document.createTextNode(i+1 + ".");
                idtd.appendChild(idtext); //idtd.setAttribute("data-sort-method", "none");
                tr.appendChild(idtd);
                //var datetd = document.createElement("td");
                //var datetext = document.createTextNode(astro["neo"]["objects"][i]["cat"]);
                //datetd.appendChild(datetext);
                //tr.appendChild(datetd);
                var nametd = document.createElement("td");
                var namelink = document.createElement("a");
                var nametext = document.createTextNode(astro["neo"]["objects"][i]["name"]);
                namelink.appendChild(nametext);
                namelink.title = astro["neo"]["objects"][i]["name"];
                namelink.href = astro["neo"]["objects"][i]["url"];
                nametd.appendChild(namelink);
                tr.appendChild(nametd);
                var hazardoustd = document.createElement("td");
                if (astro["neo"]["objects"][i]["hazardous"]) {
                  var hazardoustext = document.createTextNode("🔴");
                } else {
                  var hazardoustext = document.createTextNode("🟢");
                }
                hazardoustd.appendChild(hazardoustext);
                tr.appendChild(hazardoustd);
                var velocitytd = document.createElement("td");
                var velocitytext = document.createTextNode(astro["neo"]["objects"][i]["velocity"]);
                velocitytd.appendChild(velocitytext);
                tr.appendChild(velocitytd);
                var diametertd = document.createElement("td");
                var diametertext = document.createTextNode(astro["neo"]["objects"][i]["diameter"]);
                diametertd.appendChild(diametertext);
                tr.appendChild(diametertd);
                var missdistancetd = document.createElement("td");
                var missdistancetext = document.createTextNode(astro["neo"]["objects"][i]["distance"]);
                missdistancetd.appendChild(missdistancetext);
                tr.appendChild(missdistancetd);
                tbody.appendChild(tr);
              }
              neotable.appendChild(tbody);
            }
            var neosort = new Tablesort(neotable);
            neosort.refresh();

            // satellite images
            document.getElementById("sdohmid").src = astro["satview"]["sdo_hmid"]["datastore"]; document.getElementById("sdohmidhref").href = astro["satview"]["sdo_hmid"]["datastore"];
            document.getElementById("sdohmiic").src = astro["satview"]["sdo_hmiic"]["datastore"]; document.getElementById("sdohmiichref").href = astro["satview"]["sdo_hmiic"]["datastore"];
            document.getElementById("sdo0171").src = astro["satview"]["sdo_0171"]["datastore"]; document.getElementById("sdo0171href").href = astro["satview"]["sdo_0171"]["datastore"];
            document.getElementById("sdo0304").src = astro["satview"]["sdo_0304"]["datastore"]; document.getElementById("sdo0304href").href = astro["satview"]["sdo_0304"]["datastore"];
            document.getElementById("dscovrepicnat").src = astro["satview"]["dscovr_epic"]["datastore"]; document.getElementById("dscovrepicnathref").href = astro["satview"]["dscovr_epic"]["datastore"]; document.getElementById("dscovrepicnatinfo").innerText = astro["satview"]["dscovr_epic"]["message"];
            //document.getElementById("fulldaytitlehstack").innerText = astro["satview"]["fullday"]["title_hstack"];
            //document.getElementById("fulldayhstack").src = astro["satview"]["fullday"]["datastore_hstack"]; document.getElementById("fulldayhstack").href = astro["satview"]["fullday"]["datastore_hstack"];
            //document.getElementById("fulldaytitlevstack").innerText = astro["satview"]["fullday"]["title_vstack"];
            //document.getElementById("fulldayvstack").src = astro["satview"]["fullday"]["datastore_vstack"]; document.getElementById("fulldayvstack").href = astro["satview"]["fullday"]["datastore_vstack"];
            document.getElementById("insat3dglobalvis").src = astro["satview"]["insat_fd_vis"]["datastore"]; document.getElementById("insat3dglobalvishref").href = astro["satview"]["insat_fd_vis"]["datastore"];
            document.getElementById("insat3dglobalir1").src = astro["satview"]["insat_fd_ir"]["datastore"]; document.getElementById("insat3dglobalir1href").href = astro["satview"]["insat_fd_ir"]["datastore"];
            document.getElementById("meteosat0").src = astro["satview"]["meteosat0_naturalcolor"]["datastore"]; document.getElementById("meteosat0href").href = astro["satview"]["meteosat0_naturalcolor"]["datastore"];
            document.getElementById("meteosat415").src = astro["satview"]["meteosat415_naturalcolor"]["datastore"]; document.getElementById("meteosat415href").href = astro["satview"]["meteosat415_naturalcolor"]["datastore"];
            document.getElementById("elektrol").src = astro["satview"]["elektrol"]["datastore"]; document.getElementById("elektrolhref").href = astro["satview"]["elektrol"]["datastore"];
            document.getElementById("himawari_truecolor").src = astro["satview"]["himawari8_truecolor"]["datastore"]; document.getElementById("himawari_truecolorhref").href = astro["satview"]["himawari8_truecolor"]["datastore"];
            document.getElementById("himawari_naturalcolor").src = astro["satview"]["himawari8_naturalcolor"]["datastore"]; document.getElementById("himawari_naturalcolorhref").href = astro["satview"]["himawari8_naturalcolor"]["datastore"];
            document.getElementById("goes16eastfd").src = astro["satview"]["goes16_geocolor"]["datastore"]; document.getElementById("goes16eastfdhref").href = astro["satview"]["goes16_geocolor"]["datastore"];
            document.getElementById("goes17westfd").src = astro["satview"]["goes17_geocolor"]["datastore"]; document.getElementById("goes17westfdhref").href = astro["satview"]["goes17_geocolor"]["datastore"];

            // people in space - spaceppl
            document.getElementById("spaceppltitle").innerText = astro["spaceppl"]["title"];
            var spaceppltable = document.getElementById("spaceppltable");
            if (astro["spaceppl"]["people"].length) {
              var thead = document.createElement("thead");
              var tr = document.createElement("tr");
              var th = document.createElement("th"); var text = document.createTextNode("#"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
              var th = document.createElement("th"); var text = document.createTextNode("Name"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
              var th = document.createElement("th"); var text = document.createTextNode("Spacecraft"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
              thead.appendChild(tr);
              spaceppltable.appendChild(thead);
              var tbody = document.createElement("tbody");
              for (var i = 0; i < astro["spaceppl"]["people"].length; i++){
                var tr = document.createElement("tr");
                var td = document.createElement("td"); var text = document.createTextNode(i+1 + "."); td.appendChild(text); tr.appendChild(td);
                var td = document.createElement("td"); var link = document.createElement("a"); var text = document.createTextNode(astro["spaceppl"]["people"][i]["name"]); link.appendChild(text); link.title = astro["spaceppl"]["people"][i]["name"]; link.href = astro["spaceppl"]["people"][i]["url"]; td.appendChild(link); tr.appendChild(td);
                var td = document.createElement("td"); var text = document.createTextNode(astro["spaceppl"]["people"][i]["spacecraft"]); td.appendChild(text); tr.appendChild(td);
                tbody.appendChild(tr)
                spaceppltable.appendChild(tbody);
              }
            }
            var spacepplsort = new Tablesort(spaceppltable);
            spacepplsort.refresh();

            var spacexroadstertable = document.getElementById("spacexroadstertable");
            var tr = document.createElement("tr");
            var td1 = document.createElement("td"); var text1 = document.createTextNode("Name"); td1.appendChild(text1); td1.style.fontWeight = "bold"; tr.appendChild(td1);
            var td1 = document.createElement("td"); var td1link = document.createElement("a"); var td1text = document.createTextNode(astro["spacex"]["roadster"]["name"]); td1link.appendChild(td1text); td1link.title = astro["spacex"]["roadster"]["name"]; td1link.href = astro["spacex"]["roadster"]["url"]; td1.appendChild(td1link); tr.appendChild(td1); spacexroadstertable.appendChild(tr);
            var tr = document.createElement("tr");
            var td1 = document.createElement("td"); var text1 = document.createTextNode("Launch Date"); td1.appendChild(text1); td1.style.fontWeight = "bold"; tr.appendChild(td1);
            var td1 = document.createElement("td"); var text1 = document.createTextNode(astro["spacex"]["roadster"]["date"]); td1.appendChild(text1); tr.appendChild(td1);
            spacexroadstertable.appendChild(tr);
            var tr = document.createElement("tr");
            var td1 = document.createElement("td"); var text1 = document.createTextNode("Description"); td1.appendChild(text1); td1.style.fontWeight = "bold"; tr.appendChild(td1);
            var td1 = document.createElement("td"); var text1 = document.createTextNode(astro["spacex"]["roadster"]["description"]); td1.appendChild(text1); tr.appendChild(td1);
            spacexroadstertable.appendChild(tr);
            var tr = document.createElement("tr");
            var td1 = document.createElement("td"); var text1 = document.createTextNode("Launch Mass"); td1.appendChild(text1); td1.style.fontWeight = "bold"; tr.appendChild(td1);
            var td1 = document.createElement("td"); var text1 = document.createTextNode(astro["spacex"]["roadster"]["launch_mass"]); td1.appendChild(text1); tr.appendChild(td1);
            spacexroadstertable.appendChild(tr);
            var tr = document.createElement("tr");
            var td1 = document.createElement("td"); var text1 = document.createTextNode("Orbit"); td1.appendChild(text1); td1.style.fontWeight = "bold"; tr.appendChild(td1);
            var td1 = document.createElement("td"); var text1 = document.createTextNode(astro["spacex"]["roadster"]["orbit"]); td1.appendChild(text1); tr.appendChild(td1);
            spacexroadstertable.appendChild(tr);
            var tr = document.createElement("tr");
            var td1 = document.createElement("td"); var text1 = document.createTextNode("Speed"); td1.appendChild(text1); td1.style.fontWeight = "bold"; tr.appendChild(td1);
            var td1 = document.createElement("td"); var text1 = document.createTextNode(astro["spacex"]["roadster"]["speed"]); td1.appendChild(text1); tr.appendChild(td1);
            spacexroadstertable.appendChild(tr);
            var tr = document.createElement("tr");
            var td1 = document.createElement("td"); var text1 = document.createTextNode("Distance from Earth 🔵"); td1.appendChild(text1); td1.style.fontWeight = "bold"; tr.appendChild(td1);
            var td1 = document.createElement("td"); var text1 = document.createTextNode(astro["spacex"]["roadster"]["earth_distance"]); td1.appendChild(text1); tr.appendChild(td1);
            spacexroadstertable.appendChild(tr);
            var tr = document.createElement("tr");
            var td1 = document.createElement("td"); var text1 = document.createTextNode("Distance from Mars 🔴"); td1.appendChild(text1); td1.style.fontWeight = "bold"; tr.appendChild(td1);
            var td1 = document.createElement("td"); var text1 = document.createTextNode(astro["spacex"]["roadster"]["mars_distance"]); td1.appendChild(text1); tr.appendChild(td1);
            spacexroadstertable.appendChild(tr);

            document.getElementById("starlinkdecayedcell").innerText = astro["spacex"]["starlink"]["stats"]["decayed"];
            document.getElementById("starlinkfirstlaunchcell").innerText = astro["spacex"]["starlink"]["stats"]["firstlaunch"];
            document.getElementById("starlinkinorbitcell").innerText = astro["spacex"]["starlink"]["stats"]["inorbit"];
            document.getElementById("starlinklatestlaunchcell").innerText = astro["spacex"]["starlink"]["stats"]["latestlaunch"];
            document.getElementById("starlinktotalcell").innerText = astro["spacex"]["starlink"]["stats"]["total"];

            if (astro["spacex"]["starlink"]["satellites"].length) {
              var locations = astro["spacex"]["starlink"]["mapdata"];
              var starlinkmap = L.map('starlinkmap').setView([0, 0], 2);
              var osmlayer = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
              L.tileLayer(osmlayer, {
                attribution: '<a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
              }).addTo(starlinkmap);
              const size = 5;
              const iconOptions = {
                iconSize  : [size, size],
                iconAnchor: [size/2, size + 9], 
                className : "mymarker",
                html: "🛰️"
              }
              const markerOptions = {
                draggable: false,
                icon: L.divIcon(iconOptions)
              }
              for (var i = 0; i < locations.length; i++) {
                marker = new L.marker([locations[i][1], locations[i][2]], markerOptions).bindPopup(locations[i][0]).addTo(starlinkmap);
              }
              const opt = {
                color: '#000',
                opacity: 0.1,
                fillColor: '#000',
                fillOpacity: 0.3,
                resolution: 2
              };
              const t = L.terminator(opt);
              t.addTo(starlinkmap);
              const updateTerminator = function(t) {
                let t2 = L.terminator(opt);
                t.setLatLngs(t2.getLatLngs());
                t.redraw();
              };
            }

            var spacexpastlaunchestable = document.getElementById("spacexpastlaunchestable");
            if (astro["spacex"]["launches"]["past"].length) {
              var thead = document.createElement("thead");
              var tr = document.createElement("tr");
              var th = document.createElement("th"); var text = document.createTextNode("#"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
              var th = document.createElement("th"); var text = document.createTextNode("Date"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
              var th = document.createElement("th"); var text = document.createTextNode("Name"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
              thead.appendChild(tr);
              spacexpastlaunchestable.appendChild(thead);
              var tbody = document.createElement("tbody");
              for (var i = 0; i < astro["spacex"]["launches"]["past"].length; i++){
                var tr = document.createElement("tr");
                var coltd = document.createElement("td"); var coltext = document.createTextNode(i+1 + "."); coltd.appendChild(coltext); tr.appendChild(coltd);
                var coltd = document.createElement("td"); var coltext = document.createTextNode(astro["spacex"]["launches"]["past"][i]["launch"]); coltd.appendChild(coltext); tr.appendChild(coltd);
                var coltd = document.createElement("td"); var coltdlink = document.createElement("a"); var coltdtext = document.createTextNode(astro["spacex"]["launches"]["past"][i]["name"]); coltdlink.appendChild(coltdtext); coltdlink.title = astro["spacex"]["launches"]["past"][i]["name"]; coltdlink.href = astro["spacex"]["launches"]["past"][i]["url"]; coltd.appendChild(coltdlink); tr.appendChild(coltd); spacexpastlaunchestable.appendChild(tr);
                tbody.append(tr);
                spacexpastlaunchestable.appendChild(tbody);
              }
            }
            var spacexpastlaunchessort = new Tablesort(spacexpastlaunchestable);
            spacexpastlaunchessort.refresh();
            var spacexfuturelaunchestable = document.getElementById("spacexfuturelaunchestable");
            if (astro["spacex"]["launches"]["future"].length) {
              var thead = document.createElement("thead");
              var tr = document.createElement("tr");
              var th = document.createElement("th"); var text = document.createTextNode("#"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
              var th = document.createElement("th"); var text = document.createTextNode("Date"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
              var th = document.createElement("th"); var text = document.createTextNode("Name"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
              thead.appendChild(tr);
              spacexfuturelaunchestable.appendChild(thead);
              var tbody = document.createElement("tbody");
              for (var i = 0; i < astro["spacex"]["launches"]["future"].length; i++){
                var tr = document.createElement("tr");
                var coltd = document.createElement("td"); var coltext = document.createTextNode(i+1 + "."); coltd.appendChild(coltext); tr.appendChild(coltd);
                var coltd = document.createElement("td"); var coltext = document.createTextNode(astro["spacex"]["launches"]["future"][i]["launch"]); coltd.appendChild(coltext); tr.appendChild(coltd);
                var coltd = document.createElement("td"); var coltext = document.createTextNode(astro["spacex"]["launches"]["future"][i]["name"]); coltd.appendChild(coltext); tr.appendChild(coltd);
                tbody.append(tr);
                spacexfuturelaunchestable.appendChild(tbody);
              }
            }
            var spacexfuturelaunchessort = new Tablesort(spacexfuturelaunchestable);
            spacexfuturelaunchessort.refresh();

            // last updated timestamp
            document.getElementById("lastupdate").innerText = "Last Update: " + astro["last_update"] + " (" + timeago.format(astro["last_update_epoch"]*1000) + ")";
          });
        }
        window.onload = () => {
          //setInterval(() => {doTime();},1000); // every .5s
          //doGlobes();
          doISS();
          doAstro();
        }
      </script>
      </div>
      <script>
        function toggle(s){
          s.classList.toggle("expanded");
          var t=!1,i=!1,a=!1;
          s.classList.contains("h2")&&(t=!0),s.classList.contains("h3")&&(i=!0),s.classList.contains("h3")&&(a=!0);
          for(var l=s.nextElementSibling;l;){
            if(t&&l.classList.contains("h2")){
              l.classList.toggle("active");
              break
            }
            if(i&&(l.classList.contains("h2")||l.classList.contains("h3"))){
              l.classList.toggle("active");
              break
            }
            if(a&&(l.classList.contains("h2")||l.classList.contains("h3")||l.classList.contains("h3"))){
              l.classList.toggle("active");
              break
            }
            l.classList.contains("collapsible")&&l.classList.toggle("expanded"),l.classList.toggle("active"),l=l.nextElementSibling
          }
        }
      </script>
      <script type="text/javascript">
        const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
        const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
        if (currentTheme) {
          document.documentElement.setAttribute('data-theme', currentTheme);
          if (currentTheme === 'dark') {
            toggleSwitch.checked = true;
            document.documentElement.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark');
          } else {
            toggleSwitch.checked = false;
            document.documentElement.setAttribute('data-theme', 'light');
            localStorage.setItem('theme', 'light');
          }
          console.log("pageload: theme:" + currentTheme + " switch:" + toggleSwitch.checked);
        }
        function switchTheme(e) {
          if (e.target.checked) {
            document.documentElement.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark');
          } else {
            document.documentElement.setAttribute('data-theme', 'light');
            localStorage.setItem('theme', 'light');
          }    
          const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
          const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
          console.log("pageload: theme:" + currentTheme + " switch:" + toggleSwitch.checked);
        }
        toggleSwitch.addEventListener('change', switchTheme, false);
      </script>
      </div>
      <div><a class="footer" href="https://github.com/7h3rAm/7h3rAm.github.io">  </a></div>
    </div>
  </body>
</html>

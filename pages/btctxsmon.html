<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="author" content="Ankur Tyagi (@7h3rAm)"/>
    <meta name="description" content="Personal Weblog"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>‡§Æ‡§Ç‡§•‡§® | Manthan</title>
    <link rel="icon" type="image/webp" sizes="32x32" href="/static/images/manthan-32x32.png.webp"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/static/css/style.css"/>
    <link rel="stylesheet" href="/static/css/atelier-forest-light.css">
    <!-- <link rel="stylesheet" href="/static/css/atom-one-light.min.css"> -->
    <!-- <link rel="stylesheet" href="/static/css/default.min.css"> -->
    <!-- <link rel="stylesheet" href="/static/css/docco.min.css"> -->
    <!-- <link rel="stylesheet" href="/static/css/github-gist.min.css"> -->
    <!-- <link rel="stylesheet" href="/static/css/github.min.css"> -->
    <!-- <link rel="stylesheet" href="/static/css/zenburn.min.css"> -->
    <link rel="stylesheet" href="/static/css/tablesort.css"/>
   </head>
  <body>
    <div class="body">
      <div class="topmenu">
        <table>
          <tr>
            <td colspan="3"><a class="menu_home" href="/index.html">‡§Æ‡§Ç‡§•‡§®</a></td>
          </tr>
          <tr>
            <td><a class="menu_archive" href="/archive.html">üíæ Archive</a></td>
            <td><a class="menu_tags" href="/tags.html">üîñ Tags</a></td>
            <td><a class="menu_stats" href="/stats.html">üìä Stats</a></td>
          </tr>
        </table>
      </div>
      <div class="content">
        <h1 class="h1"><img class="btcicon" alt="‚Çø" src="https://raw.githubusercontent.com/7h3rAm/datastore/master/Bitcoin_evergreen.png"> Bitcoin Transactions Monitor</h1>
          <ul class="active">

            <li><h2 class="h2 collapsible expanded" onclick=toggle(this);>üìä Stats</h2><ul class="active nested">
              <li><p class="active nested">Tracking <code id="count_wallet"></code> Bitcoin wallets (<code id="count_address"></code> addresses) with a current balance of <code id="count_balance"></code> BTC</p><ul class="active nested">
                <li><table id="statstable" class="active nested astrotabclass">
                  <thead><tr>
                    <th><b>Category</b></th>
                    <th><b>Wallets</b></th>
                    <th><b>Addresses</b></th>
                    <th><b>Received</b></th>
                    <th><b>Sent</b></th>
                    <th><b>Balance</b></th>
                  </tr></thead>
                  <tbody><tr>
                    <td><a href="#donation">üôè Donation</a></td>
                    <td id="count_wallet_donation"></td>
                    <td id="count_address_donation"></td>
                    <td id="count_received_donation"></td>
                    <td id="count_sent_donation"></td>
                    <td id="count_balance_donation"></td>
                  </tr>
                  <tr>
                    <td><a href="#popular">üî• Popular</td>
                    <td id="count_wallet_popular"></td>
                    <td id="count_address_popular"></td>
                    <td id="count_received_popular"></td>
                    <td id="count_sent_popular"></td>
                    <td id="count_balance_popular"></td>
                  </tr>
                  <tr>
                    <td><a href="#ransom">üëæ Ransom</td>
                    <td id="count_wallet_ransom"></td>
                    <td id="count_address_ransom"></td>
                    <td id="count_received_ransom"></td>
                    <td id="count_sent_ransom"></td>
                    <td id="count_balance_ransom"></td>
                  </tr></tbody>
                </table></li>
              </ul></li>
            </ul></li>

            <li><h2 class="h2 collapsible expanded" onclick=toggle(this);><a id="donation"></a>üôè Donation</h2><ul class="active nested">
              <li><table id="donationtable" class="active nested astrotabclass"></table></li>
            </ul></li>

            <li><h2 class="h2 collapsible expanded" onclick=toggle(this);><a id="popular"></a>üî• Popular</h2><ul class="active nested">
              <li><table id="populartable" class="active nested astrotabclass"></table></li>
            </ul></li>

            <li><h2 class="h2 collapsible expanded" onclick=toggle(this);><a id="ransom"></a>üëæ Ransom</h2><ul class="active nested">
              <li><table id="ransomtable" class="active nested astrotabclass"></table></li>
            </ul></li>

          </ul>

      <p style="float:right;"><code id="lastupdate"></code></p>
      <script type="text/javascript" src="/static/js/timeago.min.js"></script>
      <script type="text/javascript" src="/static/js/tablesort.min.js"></script>
      <script type="text/javascript" src="/static/js/tablesort.monthname.js"></script>
      <script type="text/javascript" src="/static/js/tablesort.number.js"></script>

      <script>
        // https://stackoverflow.com/a/17177423/1079836
        function truncateWithEllipses(text, max) {return text.substr(0,max-1)+(text.length>max?'...':''); }
        function loadJson(url, callback) {
          var XmlHttpRequest = new XMLHttpRequest();
          XmlHttpRequest.overrideMimeType("application/json");
          XmlHttpRequest.open('GET', url, true);
          XmlHttpRequest.onreadystatechange = function () {
            if (XmlHttpRequest.readyState == 4 && XmlHttpRequest.status == "200") {
              callback(XmlHttpRequest.responseText);
            }
          }
          XmlHttpRequest.send(null);
        }
        function doBTCTxsMon() {
          //document.getElementById("donationslastseencell").innerText = timeago.format(1473245023718);

          loadJson("https://raw.githubusercontent.com/7h3rAm/datastore/master/btctxsmon.json", function(response) {
            btctxsmon = JSON.parse(response);
            console.log(btctxsmon);

            document.getElementById("count_wallet").innerText = btctxsmon["stats"]["count_wallet"];
            document.getElementById("count_address").innerText = btctxsmon["stats"]["count_address"];
            document.getElementById("count_balance").innerText = btctxsmon["stats"]["count_balance"].toFixed(8);

            document.getElementById("count_wallet_donation").innerText = btctxsmon["stats"]["count_wallet_donation"];
            document.getElementById("count_address_donation").innerText = btctxsmon["stats"]["count_address_donation"];
            document.getElementById("count_received_donation").innerText = btctxsmon["stats"]["count_received_donation"].toFixed(8);
            document.getElementById("count_received_donation").style.color = "#5cb25e"
            document.getElementById("count_sent_donation").innerText = btctxsmon["stats"]["count_sent_donation"].toFixed(8);
            document.getElementById("count_sent_donation").style.color = "#fc580c"
            document.getElementById("count_balance_donation").innerText = btctxsmon["stats"]["count_balance_donation"].toFixed(8);
            document.getElementById("count_balance_donation").style.color = "#5b92e5"
            document.getElementById("count_wallet_popular").innerText = btctxsmon["stats"]["count_wallet_popular"];
            document.getElementById("count_address_popular").innerText = btctxsmon["stats"]["count_address_popular"];
            document.getElementById("count_received_popular").innerText = btctxsmon["stats"]["count_received_popular"].toFixed(8);
            document.getElementById("count_received_popular").style.color = "#5cb25e"
            document.getElementById("count_sent_popular").innerText = btctxsmon["stats"]["count_sent_popular"].toFixed(8);
            document.getElementById("count_sent_popular").style.color = "#fc580c"
            document.getElementById("count_balance_popular").innerText = btctxsmon["stats"]["count_balance_popular"].toFixed(8);
            document.getElementById("count_balance_popular").style.color = "#5b92e5"
            document.getElementById("count_wallet_ransom").innerText = btctxsmon["stats"]["count_wallet_ransom"];
            document.getElementById("count_address_ransom").innerText = btctxsmon["stats"]["count_address_ransom"];
            document.getElementById("count_received_ransom").innerText = btctxsmon["stats"]["count_received_ransom"].toFixed(8);
            document.getElementById("count_received_ransom").style.color = "#5cb25e"
            document.getElementById("count_sent_ransom").innerText = btctxsmon["stats"]["count_sent_ransom"].toFixed(8);
            document.getElementById("count_sent_ransom").style.color = "#fc580c"
            document.getElementById("count_balance_ransom").innerText = btctxsmon["stats"]["count_balance_ransom"].toFixed(8);
            document.getElementById("count_balance_ransom").style.color = "#5b92e5"

            var donationtable = document.getElementById("donationtable");
            var thead = document.createElement("thead");
            var tr = document.createElement("tr");
            //var th = document.createElement("th"); var text = document.createTextNode("#"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("VisSum"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Wallet"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Received"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Sent"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Balance"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("LastActivity"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            thead.appendChild(tr);
            donationtable.appendChild(thead);
            var tbody = document.createElement("tbody");
            var i = 0;
            Object.keys(btctxsmon["category"]["donation"]).forEach(function(wallet) {
              if (btctxsmon["category"]["donation"][wallet]["transaction"] > 0) {
                var tr = document.createElement("tr");
                //var td = document.createElement("td");
                //var text = document.createTextNode(i+1 + ".");
                //td.appendChild(text);
                //tr.appendChild(td);
                var td = document.createElement("td");
                var span = document.createElement("span")
                span.setAttribute("class", "sparklines");
                var text = document.createTextNode(btctxsmon["category"]["donation"][wallet]["sparkid"]);
                span.appendChild(text);
                colorspark(span);
                td.appendChild(span);
                tr.appendChild(td);
                var td = document.createElement("td");
                var link = document.createElement("a");
                var text = document.createTextNode(truncateWithEllipses(wallet, 20));
                link.appendChild(text);
                var addr = btctxsmon["category"]["donation"][wallet]["address"] > 1 ? "addresses" : "address";
                var txs = btctxsmon["category"]["donation"][wallet]["transaction"] > 1 ? "transactions" : "transaction";
                link.title = "'" + wallet + "' wallet has " + btctxsmon["category"]["donation"][wallet]["address"] + " " + addr + " with " + btctxsmon["category"]["donation"][wallet]["transaction"] + " " + txs + ".";
                link.style.color = "#000000";
                td.appendChild(link);
                tr.appendChild(td);
                var td = document.createElement("td");
                td.style.color = "#5cb25e"
                var text = document.createTextNode(btctxsmon["category"]["donation"][wallet]["received"].toFixed(8));
                td.appendChild(text);
                tr.appendChild(td);
                var td = document.createElement("td");
                td.style.color = "#fc580c";
                var text = document.createTextNode(btctxsmon["category"]["donation"][wallet]["sent"].toFixed(8));
                td.appendChild(text);
                tr.appendChild(td);
                var td = document.createElement("td");
                td.style.color = "#5b92e5";
                var text = document.createTextNode(btctxsmon["category"]["donation"][wallet]["balance"].toFixed(8));
                td.appendChild(text);
                tr.appendChild(td);
                var td = document.createElement("td");
                if (btctxsmon["category"]["donation"][wallet]["lasttxepoch"]) {
                  var link = document.createElement("a");
                  var text = document.createTextNode(timeago.format(btctxsmon["category"]["donation"][wallet]["lasttxepoch"]*1000));
                  link.appendChild(text);
                  link.title = btctxsmon["category"]["donation"][wallet]["lastseen"];
                  link.style.color = "#000000";
                  td.appendChild(link);
                } else {
                  var text = document.createTextNode("");
                  td.appendChild(text);
                }
                tr.appendChild(td);
                tbody.appendChild(tr);
                i = i+1;
              }
              donationtable.appendChild(tbody);
            })

            var populartable = document.getElementById("populartable");
            var thead = document.createElement("thead");
            var tr = document.createElement("tr");
            //var th = document.createElement("th"); var text = document.createTextNode("#"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("VisSum"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Wallet"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Received"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Sent"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Balance"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("LastActivity"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            thead.appendChild(tr);
            populartable.appendChild(thead);
            var tbody = document.createElement("tbody");
            var i = 0;
            Object.keys(btctxsmon["category"]["popular"]).forEach(function(wallet) {
              if (btctxsmon["category"]["popular"][wallet]["transaction"] > 0) {
                var tr = document.createElement("tr");
                //var td = document.createElement("td");
                //var text = document.createTextNode(i+1 + ".");
                //td.appendChild(text);
                //tr.appendChild(td);
                var td = document.createElement("td");
                var span = document.createElement("span")
                span.setAttribute("class", "sparklines");
                var text = document.createTextNode(btctxsmon["category"]["popular"][wallet]["sparkid"]);
                span.appendChild(text);
                colorspark(span);
                td.appendChild(span);
                tr.appendChild(td);
                var td = document.createElement("td");
                var link = document.createElement("a");
                var text = document.createTextNode(truncateWithEllipses(wallet, 15));
                link.appendChild(text);
                var addr = btctxsmon["category"]["popular"][wallet]["address"] > 1 ? "addresses" : "address";
                var txs = btctxsmon["category"]["popular"][wallet]["transaction"] > 1 ? "transactions" : "transaction";
                link.title = "'" + wallet + "' wallet has " + btctxsmon["category"]["popular"][wallet]["address"] + " " + addr + " with " + btctxsmon["category"]["popular"][wallet]["transaction"] + " " + txs + ".";
                link.style.color = "#000000";
                td.appendChild(link);
                tr.appendChild(td);
                var td = document.createElement("td");
                td.style.color = "#5cb25e"
                var text = document.createTextNode(btctxsmon["category"]["popular"][wallet]["received"].toFixed(8));
                td.appendChild(text);
                tr.appendChild(td);
                var td = document.createElement("td");
                td.style.color = "#fc580c";
                var text = document.createTextNode(btctxsmon["category"]["popular"][wallet]["sent"].toFixed(8));
                td.appendChild(text);
                tr.appendChild(td);
                var td = document.createElement("td");
                td.style.color = "#5b92e5";
                var text = document.createTextNode(btctxsmon["category"]["popular"][wallet]["balance"].toFixed(8));
                td.appendChild(text);
                tr.appendChild(td);
                var td = document.createElement("td");
                if (btctxsmon["category"]["popular"][wallet]["lasttxepoch"]) {
                  var link = document.createElement("a");
                  var text = document.createTextNode(timeago.format(btctxsmon["category"]["popular"][wallet]["lasttxepoch"]*1000));
                  link.appendChild(text);
                  link.title = btctxsmon["category"]["popular"][wallet]["lastseen"];
                  link.style.color = "#000000";
                  td.appendChild(link);
                } else {
                  var text = document.createTextNode("");
                  td.appendChild(text);
                }
                tr.appendChild(td);
                tbody.appendChild(tr);
                i = i+1;
              }
              populartable.appendChild(tbody);
            })

            var ransomtable = document.getElementById("ransomtable");
            var thead = document.createElement("thead");
            var tr = document.createElement("tr");
            //var th = document.createElement("th"); var text = document.createTextNode("#"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("VisSum"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Wallet"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Received"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Sent"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("Balance"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            var th = document.createElement("th"); var text = document.createTextNode("LastActivity"); th.appendChild(text); th.style.fontWeight = "bold"; tr.appendChild(th);
            thead.appendChild(tr);
            ransomtable.appendChild(thead);
            var tbody = document.createElement("tbody");
            var i = 0;
            Object.keys(btctxsmon["category"]["ransom"]).forEach(function(wallet) {
              if (btctxsmon["category"]["ransom"][wallet]["transaction"] > 0) {
                var tr = document.createElement("tr");
                //var td = document.createElement("td");
                //var text = document.createTextNode(i+1 + ".");
                //td.appendChild(text);
                //tr.appendChild(td);
                var td = document.createElement("td");
                var span = document.createElement("span")
                span.setAttribute("class", "sparklines");
                var text = document.createTextNode(btctxsmon["category"]["ransom"][wallet]["sparkid"]);
                span.appendChild(text);
                colorspark(span);
                td.appendChild(span);
                tr.appendChild(td);
                var td = document.createElement("td");
                var link = document.createElement("a");
                var text = document.createTextNode(truncateWithEllipses(wallet, 20));
                link.appendChild(text);
                var addr = btctxsmon["category"]["ransom"][wallet]["address"] > 1 ? "addresses" : "address";
                var txs = btctxsmon["category"]["ransom"][wallet]["transaction"] > 1 ? "transactions" : "transaction";
                link.title = "'" + wallet + "' wallet has " + btctxsmon["category"]["ransom"][wallet]["address"] + " " + addr + " with " + btctxsmon["category"]["ransom"][wallet]["transaction"] + " " + txs + ".";
                link.style.color = "#000000";
                td.appendChild(link);
                tr.appendChild(td);
                var td = document.createElement("td");
                td.style.color = "#5cb25e"
                var text = document.createTextNode(btctxsmon["category"]["ransom"][wallet]["received"].toFixed(8));
                td.appendChild(text);
                tr.appendChild(td);
                var td = document.createElement("td");
                td.style.color = "#fc580c";
                var text = document.createTextNode(btctxsmon["category"]["ransom"][wallet]["sent"].toFixed(8));
                td.appendChild(text);
                tr.appendChild(td);
                var td = document.createElement("td");
                td.style.color = "#5b92e5";
                var text = document.createTextNode(btctxsmon["category"]["ransom"][wallet]["balance"].toFixed(8));
                td.appendChild(text);
                tr.appendChild(td);
                var td = document.createElement("td");
                if (btctxsmon["category"]["ransom"][wallet]["lasttxepoch"]) {
                  var link = document.createElement("a");
                  var text = document.createTextNode(timeago.format(btctxsmon["category"]["ransom"][wallet]["lasttxepoch"]*1000));
                  link.appendChild(text);
                  link.title = btctxsmon["category"]["ransom"][wallet]["lastseen"];
                  link.style.color = "#000000";
                  td.appendChild(link);
                } else {
                  var text = document.createTextNode("");
                  td.appendChild(text);
                }
                tr.appendChild(td);
                tbody.appendChild(tr);
                i = i+1;
              }
              ransomtable.appendChild(tbody);
            })

            // last updated timestamp
            document.getElementById("lastupdate").innerText = "Last Update: " + btctxsmon["last_update"];

            var statstable = document.getElementById("statstable");
            var statssort = new Tablesort(statstable);
            statssort.refresh();
            var donationtable = document.getElementById("donationtable");
            var donationsort = new Tablesort(donationtable);
            donationsort.refresh();
            var populartable = document.getElementById("populartable");
            var popularsort = new Tablesort(populartable);
            popularsort.refresh();
            var ransomtable = document.getElementById("ransomtable");
            var ransomsort = new Tablesort(ransomtable);
            ransomsort.refresh();

          });
        }

        // https://stackoverflow.com/a/54248600/1079836
        function colorspark(element) {
          var colors = ["#007bff", "#00bcd4", "#17a2b8", "#20c997", "#2196f3", "#28a745", "#4caf50", "#6610f2", "#6c757d", "#6f42c1", "#8357ff", "#dc3545", "#e83e8c", "#f44336", "#fd7e14", "#ffc107", "#20b2aa", "#99cc99", "#0c9", "#5b92e5", "#ffcc66", "#00b7eb", "#69359c", "#fe4164", "#a50b5e"];
          var text = element.innerText;
          element.innerText = '';
          var chars = text.split('');
          for(var ch of chars) {
             var charspan = document.createElement('span');
             charspan.innerText = ch;
             var index = Math.floor(Math.random()*colors.length);
             charspan.style.color = colors[index]
             element.appendChild(charspan);
          }
        }

        window.onload = () => {
          //setInterval(() => {doTime();},1000); // every .5s
          doBTCTxsMon();
        }
      </script>

      </div>
      <script>
        function toggle(s){
          s.classList.toggle("expanded");
          var t=!1,i=!1,a=!1;
          s.classList.contains("h2")&&(t=!0),s.classList.contains("h3")&&(i=!0),s.classList.contains("h4")&&(a=!0);
          for(var l=s.nextElementSibling;l;){
            if(t&&l.classList.contains("h2")){
              l.classList.toggle("active");
              break
            }
            if(i&&(l.classList.contains("h2")||l.classList.contains("h3"))){
              l.classList.toggle("active");
              break
            }
            if(a&&(l.classList.contains("h2")||l.classList.contains("h3")||l.classList.contains("h4"))){
              l.classList.toggle("active");
              break
            }
            l.classList.contains("collapsible")&&l.classList.toggle("expanded"),l.classList.toggle("active"),l=l.nextElementSibling
          }
        }
      </script>
      </div>
      <div><a class="footer" href="https://github.com/7h3rAm/7h3rAm.github.io">Óäë Óäê Óäó</a></div>
    </div>
  </body>
</html>
